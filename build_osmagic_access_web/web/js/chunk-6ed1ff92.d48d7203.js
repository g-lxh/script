(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ed1ff92"],{"2ab4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-card-content"},[t("div",{staticClass:"top-area"},[t("el-form",{ref:"searchForm",staticStyle:{width:"100%"},attrs:{model:e.searchForm,inline:"",size:"middle"}},[t("div",{staticStyle:{display:"flex"}},[t("div",{staticStyle:{flex:"1"}},[t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{staticClass:"mr50",attrs:{placeholder:"输入搜索关键字",clearable:""},model:{value:e.searchForm.keywordName,callback:function(t){e.$set(e.searchForm,"keywordName",t)},expression:"searchForm.keywordName"}})],1)],1),t("div",[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleRowClick("add")}}},[e._v("新增")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getTableData(!0)}}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetData()}}},[e._v("重置")])],1)],1)])])],1),t("el-table",{attrs:{data:e.tableData,stripe:"","row-key":"id","header-cell-style":{background:"#f7f8fb"},height:"620"},on:{select:e.handlSelect,"select-all":e.handlSelect}},[t("template",{slot:"empty"},[t("div",{staticClass:"empty-img"},[t("img",{attrs:{src:a("b45c")}}),t("p",[e._v("暂无数据")])])]),t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"名称","show-overflow-tooltip":"",prop:"name"}}),t("el-table-column",{attrs:{label:"描述",prop:"desc"}}),t("el-table-column",{attrs:{label:"创建人",prop:"creatorName"}}),t("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleRowClick("editor",a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleRowClick("authorization",a.row)}}},[e._v("授权")]),t("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text"},on:{click:function(t){return e.handleRowClick("delete",a.row)}}},[e._v("删除")])]}}])})],2),t("el-pagination",{staticClass:"main-pagination",attrs:{total:e.pageInfo.total,"current-page":e.searchForm.pageNum,"page-size":e.searchForm.pageSize,"page-sizes":e.pageInfo.pageSizes,background:"",layout:"total, sizes, prev, pager, next"},on:{"current-change":e.handlePageChanged,"size-change":e.handlePageSizeChanged}}),t("el-dialog",{staticStyle:{"margin-top":"-20px"},attrs:{title:"editor"==e.operationType?"编辑":"新增",width:"600px",visible:e.dialogVisible,"close-on-click-modal":!1,"label-width":"120px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"100px",rules:e.formRules}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{staticClass:"labelWidth",attrs:{maxlength:"10"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),t("el-form-item",{attrs:{label:"描述"}},[t("el-input",{staticClass:"labelWidth",attrs:{maxlength:"150"},model:{value:e.addForm.desc,callback:function(t){e.$set(e.addForm,"desc",t)},expression:"addForm.desc"}})],1),t("el-form-item",[t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(" 保存 ")]),t("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.submitForm(1)}}},[e._v(" 取消 ")])],1)],1)],1)],1)},i=[],l=a("365c"),r={filters:{},data(){return{loading:!1,tableData:[],pageInfo:{pageSizes:[10,20,50],total:0},searchForm:{keywordName:"",pageNum:1,pageSize:10},dialogVisible:!1,operationType:"add",addForm:{},formRules:{name:[{trigger:"blur",message:"请输入正确名称（支持中文，英文大小写）",required:!0,pattern:"^[a-zA-Z\\u4e00-\\u9fa5]+$"}]}}},created(){this.getTableData()},mounted(){},methods:{submitForm(e){1==e?(this.$refs.addForm.resetFields(),this.addForm.desc="",this.dialogVisible=!1):this.$refs.addForm.validate(e=>{e?this.addForm.id?l["a"].getRolesMotiy(this.addForm).then(e=>{200==e.status?(this.dialogVisible=!1,this.$refs.addForm.resetFields(),this.$message.success("保存成功"),this.getTableData()):this.$message.error(e.message)}):l["a"].getRolesAdd(this.addForm).then(e=>{200==e.status?(this.dialogVisible=!1,this.$refs.addForm.resetFields(),this.$message.success("保存成功"),this.getTableData()):this.$message.error(e.message)}):this.$message.error("请检查表单内容是否填写完整")})},handlSelect(e){this.clickRow=e},resetData(){this.searchForm={keywordName:"",pageNum:1,pageSize:10},this.getTableData()},handleRowClick(e,t){switch(e){case"add":this.dialogVisible=!0,this.operationType="add",this.addForm.id&&delete this.addForm.id;break;case"editor":this.dialogVisible=!0,this.operationType="editor",this.addForm={id:t.id,name:t.name,desc:t.desc};break;case"delete":this.getAialarmDelete(t.id);break;case"authorization":this.$router.push({name:"associatedMenu",query:{row:JSON.stringify(t)}});break}},getAialarmDelete(e){const t=[];t.push(e),this.$confirm("删除以后数据不可恢复，请谨慎操作！","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.loading=!0,l["a"].getRolesDelete({ids:t}).then(e=>{200==e.status?(this.$message.success(e.message),this.getTableData()):this.$message.error(e.message)}).finally(()=>{this.loading=!1})})},getDetail(e){l["a"].getAialiarmDetail({id:e.id}).then(e=>{200==e.status?(this.detailVisible=!0,this.detailData=e.data.rawData,this.format()):this.$message.error(e.message)})},getTableData(e){this.loading=!0,e&&(this.searchForm.pageNum=1,this.searchForm.pageSize=10);const t=JSON.parse(JSON.stringify(this.searchForm));t.dateRange&&t.dateRange.length>0&&(t.alarmTimeStop=t.dateRange[1],t.alarmTimeStart=t.dateRange[0]),delete t.dateRange,t.name||delete t.name,l["a"].getRolesList(t).then(e=>{200==e.status?(this.pageInfo.total=e.data.total,this.tableData=e.data.records):this.$message.error(e.message)}).finally(()=>{this.loading=!1})},handlePageChanged(e){this.searchForm.pageNum=e,this.getTableData(!1)},handlePageSizeChanged(e){this.searchForm.pageSize=e,this.getTableData(!1)}}},o=r,n=(a("d626"),a("2877")),d=Object(n["a"])(o,s,i,!1,null,"6219b24a",null);t["default"]=d.exports},b45c:function(e,t,a){e.exports=a.p+"img/empty.b4816776.png"},ccc2:function(e,t,a){},d626:function(e,t,a){"use strict";a("ccc2")}}]);
//# sourceMappingURL=chunk-6ed1ff92.d48d7203.js.map