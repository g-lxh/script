(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75dcddae"],{"20ac":function(e,t,a){"use strict";a("7930")},7930:function(e,t,a){},"8eaf":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-card-content"},[t("div",{staticClass:"top-area"},[t("el-form",{ref:"searchForm",staticStyle:{width:"100%"},attrs:{model:e.searchForm,inline:"",size:"middle"}},[t("div",{staticStyle:{display:"flex"}},[t("div",{staticStyle:{flex:"1"}},[t("el-form-item",{attrs:{label:"平台名称"}},[t("el-input",{staticClass:"mr50",attrs:{placeholder:"输入搜索关键字",clearable:""},model:{value:e.searchForm.keywordName,callback:function(t){e.$set(e.searchForm,"keywordName",t)},expression:"searchForm.keywordName"}})],1)],1),t("div",[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleRowClick("add")}}},[e._v("新增")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getTableData(!0)}}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetData()}}},[e._v("重置")])],1)],1)])])],1),t("el-table",{attrs:{data:e.tableData,stripe:"","row-key":"id","header-cell-style":{background:"#f7f8fb"},height:"620"},on:{select:e.handlSelect,"select-all":e.handlSelect}},[t("template",{slot:"empty"},[t("div",{staticClass:"empty-img"},[t("img",{attrs:{src:a("b45c")}}),t("p",[e._v("暂无数据")])])]),t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"平台名称","show-overflow-tooltip":"",prop:"name",width:"150"}}),t("el-table-column",{attrs:{label:"平台描述",prop:"desc",width:"150"}}),t("el-table-column",{attrs:{label:"链接",prop:"url"}}),t("el-table-column",{attrs:{label:"APPKey",prop:"appKey",width:"160"}}),t("el-table-column",{attrs:{label:"AppSecret",prop:"appSecret"}}),t("el-table-column",{attrs:{label:"创建人",prop:"creatorName",width:"150"}}),t("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"180"}}),t("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleRowClick("editor",a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleRowClick("config",a.row)}}},[e._v("菜单设置")]),t("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text"},on:{click:function(t){return e.handleRowClick("delete",a.row)}}},[e._v("删除")])]}}])})],2),t("el-pagination",{staticClass:"main-pagination",attrs:{total:e.pageInfo.total,"current-page":e.searchForm.pageNum,"page-size":e.searchForm.pageSize,"page-sizes":e.pageInfo.pageSizes,background:"",layout:"total, sizes, prev, pager, next"},on:{"current-change":e.handlePageChanged,"size-change":e.handlePageSizeChanged}}),t("el-dialog",{staticStyle:{"margin-top":"-20px"},attrs:{title:"editor"==e.operationType?"编辑":"新增",width:"600px",visible:e.dialogVisible,"close-on-click-modal":!1,"label-width":"120px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"100px",rules:e.formRules}},[t("el-form-item",{attrs:{label:"平台名称",prop:"name"}},[t("el-input",{staticClass:"labelWidth",attrs:{placeholder:"请输入内容",maxlength:"10"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),t("el-form-item",{attrs:{label:"链接",prop:"url"}},[t("el-input",{staticClass:"labelWidth",attrs:{placeholder:"请输入内容"},model:{value:e.addForm.url,callback:function(t){e.$set(e.addForm,"url",t)},expression:"addForm.url"}})],1),"editor"==e.operationType?t("el-form-item",{attrs:{label:"AppKey",prop:"appKey"}},[t("el-input",{staticClass:"labelWidth",attrs:{placeholder:"请输入内容",disabled:"editor"==e.operationType},model:{value:e.addForm.appKey,callback:function(t){e.$set(e.addForm,"appKey",t)},expression:"addForm.appKey"}})],1):e._e(),"editor"==e.operationType?t("el-form-item",{attrs:{label:"AppSecret",prop:"appSecret"}},[t("el-input",{staticClass:"labelWidth",attrs:{placeholder:"请输入内容",disabled:"editor"==e.operationType},model:{value:e.addForm.appSecret,callback:function(t){e.$set(e.addForm,"appSecret",t)},expression:"addForm.appSecret"}}),t("icon",{staticClass:"el-icon-refresh",staticStyle:{"margin-left":"10px",cursor:"pointer"},on:{click:e.getPlatformDetail}})],1):e._e(),t("el-form-item",{attrs:{label:"平台描述",prop:"desc"}},[t("el-input",{staticClass:"labelWidth",attrs:{placeholder:"请输入内容",maxlength:"150"},model:{value:e.addForm.desc,callback:function(t){e.$set(e.addForm,"desc",t)},expression:"addForm.desc"}})],1),t("el-form-item",[t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(" 保存 ")]),t("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.submitForm(1)}}},[e._v(" 取消 ")])],1)],1)],1)],1)},r=[],s=a("365c"),i={filters:{},data(){return{loading:!1,tableData:[],pageInfo:{pageSizes:[10,20,50],total:0},searchForm:{keywordName:"",pageNum:1,pageSize:10},dialogVisible:!1,operationType:"add",addForm:{},formRules:{name:[{trigger:"blur",message:"请输入正确名称（支持中文，英文大小写）",required:!0,pattern:"^[a-zA-Z\\u4e00-\\u9fa5]+$"}],url:[{trigger:"blur",message:"请输入正确链接地址",required:!0,pattern:/(http|https):\/\/([\w.]+\/?)\S*/}]},platformId:0}},created(){this.getTableData()},mounted(){},methods:{getPlatformDetail(){s["a"].getPlatformDetail({id:this.platformId}).then(e=>{200==e.status?this.addForm=e.data:this.$message.error(e.message)})},submitForm(e){1==e?(this.$refs.addForm.resetFields(),this.addForm.desc="",this.dialogVisible=!1):this.$refs.addForm.validate(e=>{e?this.addForm.id?s["a"].getPlatformModify(this.addForm).then(e=>{200==e.status?(this.$refs.addForm.resetFields(),this.dialogVisible=!1,this.$message.success("保存成功"),this.getTableData()):this.$message.error(e.message)}):s["a"].getPlatformAdd(this.addForm).then(e=>{200==e.status?(this.$refs.addForm.resetFields(),this.dialogVisible=!1,this.$message.success("保存成功"),this.getTableData()):this.$message.error(e.message)}):this.$message.error("请检查表单内容是否填写完整")})},handlSelect(e){this.clickRow=e},resetData(){this.searchForm={keywordName:"",pageNum:1,pageSize:10},this.getTableData()},handleRowClick(e,t){switch(e){case"add":this.dialogVisible=!0,this.operationType="add",this.addForm.id&&delete this.addForm.id;break;case"editor":this.platformId=t.id,this.operationType=e,this.dialogVisible=!0,this.getPlatformDetail();break;case"delete":this.getPlatformDelete(t.id);break;case"config":this.$router.push({name:"menuManage",query:{id:t.id,url:t.url,desc:t.desc,name:t.name}});break}},getPlatformDelete(e){const t=[];t.push(e),this.$confirm("删除以后数据不可恢复，请谨慎操作！","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.loading=!0,s["a"].getPlatformDelete({ids:t}).then(e=>{200==e.status?(this.$message.success(e.message),this.getTableData()):this.$message.error(e.message)}).finally(()=>{this.loading=!1})})},getTableData(e){this.loading=!0,e&&(this.searchForm.pageNum=1,this.searchForm.pageSize=10);const t=JSON.parse(JSON.stringify(this.searchForm));t.keywordName||delete t.keywordName,s["a"].getPlatformListPage(t).then(e=>{200==e.status?(this.pageInfo.total=e.data.total,this.tableData=e.data.records):this.$message.error(e.message)}).finally(()=>{this.loading=!1})},handlePageChanged(e){this.searchForm.pageNum=e,this.getTableData(!1)},handlePageSizeChanged(e){this.searchForm.pageSize=e,this.getTableData(!1)}}},o=i,d=(a("20ac"),a("2877")),n=Object(d["a"])(o,l,r,!1,null,"2f13de57",null);t["default"]=n.exports},b45c:function(e,t,a){e.exports=a.p+"img/empty.b4816776.png"}}]);
//# sourceMappingURL=chunk-75dcddae.30660304.js.map