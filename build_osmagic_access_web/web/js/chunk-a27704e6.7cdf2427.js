(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a27704e6"],{"4f98":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-card-content"},[t("div",{staticClass:"top-area"},[t("el-form",{ref:"searchForm",staticStyle:{width:"100%"},attrs:{model:e.searchForm,inline:"",size:"middle"}},[t("div",{staticStyle:{display:"flex"}},[t("div",{staticStyle:{flex:"1"}},[t("el-form-item",{attrs:{label:"账号"}},[t("el-input",{staticClass:"mr50",attrs:{placeholder:"输入搜索关键字",clearable:""},model:{value:e.searchForm.account,callback:function(t){e.$set(e.searchForm,"account",t)},expression:"searchForm.account"}})],1),t("el-form-item",{attrs:{label:"角色"}},[t("el-select",{attrs:{placeholder:"请选择内容",clearable:""},model:{value:e.searchForm.role,callback:function(t){e.$set(e.searchForm,"role",t)},expression:"searchForm.role"}},e._l(e.rolesAll,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("div",[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleRowClick("add")}}},[e._v("新增")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getTableData()}}},[e._v("查询")])],1),t("el-form-item",[t("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.resetData()}}},[e._v("重置")])],1)],1)])])],1),t("el-table",{attrs:{data:e.tableData,stripe:"","row-key":"id","header-cell-style":{background:"#f7f8fb"},height:"620"},on:{select:e.handlSelect,"select-all":e.handlSelect}},[t("template",{slot:"empty"},[t("div",{staticClass:"empty-img"},[t("img",{attrs:{src:a("b45c")}}),t("p",[e._v("暂无数据")])])]),t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"账号","show-overflow-tooltip":"",prop:"account"}}),t("el-table-column",{attrs:{label:"手机号码",prop:"mobile"}}),t("el-table-column",{attrs:{label:"角色",prop:"roleName"}}),t("el-table-column",{attrs:{label:"状态",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e._f("filterState")(a.row.state)))])]}}])}),t("el-table-column",{attrs:{label:"创建人",prop:"creatorName"}}),t("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleRowClick("editor",a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleRowClick("enable",a.row)}}},[e._v(e._s(0==a.row.state?"启用":"禁用"))]),t("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text"},on:{click:function(t){return e.handleRowClick("delete",a.row)}}},[e._v("删除")])]}}])})],2),t("el-pagination",{staticClass:"main-pagination",attrs:{total:e.pageInfo.total,"current-page":e.searchForm.pageNum,"page-size":e.searchForm.pageSize,"page-sizes":e.pageInfo.pageSizes,background:"",layout:"total, sizes, prev, pager, next"},on:{"current-change":e.handlePageChanged,"size-change":e.handlePageSizeChanged}}),t("el-dialog",{staticStyle:{"margin-top":"-20px"},attrs:{title:"editor"==e.operationType?"编辑":"新增",width:"580px",visible:e.dialogVisible,"close-on-click-modal":!1,"label-width":"120px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"100px",rules:e.formRules}},[t("el-form-item",{attrs:{label:"账号",prop:"account"}},[t("el-input",{staticClass:"labelWidth",attrs:{clearable:"",maxlength:"15"},model:{value:e.addForm.account,callback:function(t){e.$set(e.addForm,"account",t)},expression:"addForm.account"}})],1),t("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[t("el-input",{staticClass:"labelWidth",attrs:{clearable:""},model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1),t("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[t("el-input",{staticClass:"labelWidth",attrs:{type:"password",autocomplete:"off",clearable:"",disabled:"editor"==e.operationType},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[t("el-input",{staticClass:"labelWidth",attrs:{type:"password",autocomplete:"off",clearable:"",disabled:"editor"==e.operationType},model:{value:e.addForm.checkPass,callback:function(t){e.$set(e.addForm,"checkPass",t)},expression:"addForm.checkPass"}})],1),t("el-form-item",{attrs:{label:"角色",prop:"roleIds"}},[t("el-select",{attrs:{multiple:"",clearable:""},model:{value:e.addForm.roleIds,callback:function(t){e.$set(e.addForm,"roleIds",t)},expression:"addForm.roleIds"}},e._l(e.rolesAll,(function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"状态",prop:"state"}},[t("el-radio-group",{model:{value:e.addForm.state,callback:function(t){e.$set(e.addForm,"state",t)},expression:"addForm.state"}},[t("el-radio",{attrs:{label:1}},[e._v("启用")]),t("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1),t("el-form-item",[t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(" 保存 ")]),t("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.submitForm(1)}}},[e._v(" 取消 ")])],1)],1)],1)],1)},l=[],r=(a("d9e2"),a("365c")),o={filters:{filterState(e){return 0==e?"禁用":"启用"}},data(){var e=(e,t,a)=>{""===t?a(new Error("请输入密码")):(""!==this.addForm.checkPass&&this.$refs.addForm.validateField("checkPass"),a())},t=(e,t,a)=>{""===t?a(new Error("请再次输入密码")):t!==this.addForm.password?a(new Error("两次输入密码不一致!")):a()};return{loading:!1,tableData:[],pageInfo:{pageSizes:[10,20,50],total:0},searchForm:{account:"",role:"",pageNum:1,pageSize:10},dialogVisible:!1,operationType:"add",addForm:{state:"1",account:"",mobile:"",password:"",roleIds:[],checkPass:""},formRules:{type:[{required:!0}],account:[{trigger:"blur",message:"请输入正确账号（只支持大小写）",pattern:"^[a-zA-Z]",required:!0}],mobile:{trigger:"blur",message:"请输入正确手机号",pattern:"^1[35789]\\d{9}$",required:!0},password:[{validator:e,trigger:"blur",required:!0}],checkPass:[{validator:t,trigger:"blur",required:!0}],roleIds:{trigger:"change",message:"请选择角色",required:!0}},rolesAll:[],accountName:[]}},created(){},mounted(){this.getTableData(),this.getRolesAll()},methods:{getRolesAll(){r["a"].getRolesAll().then(e=>{200==e.status?this.rolesAll=e.data:this.$message.error(e.message)})},submitForm(e){1==e?(this.$refs.addForm.resetFields(),this.addForm.desc="",this.dialogVisible=!1):this.$refs.addForm.validate(e=>{if(e)if(this.addForm.id){let e={mobile:this.addForm.mobile,account:this.addForm.account,roleIds:this.addForm.roleIds,id:this.addForm.id,state:this.addForm.state};r["a"].getAccountMotiy(e).then(e=>{200==e.status?(this.$refs.addForm.resetFields(),this.dialogVisible=!1,this.$message.success("保存成功"),this.getTableData()):this.$message.error(e.message)})}else delete this.addForm.checkPass,r["a"].getAccountAdd(this.addForm).then(e=>{200==e.status?(this.$refs.addForm.resetFields(),this.dialogVisible=!1,this.$message.success("保存成功"),this.getTableData()):this.$message.error(e.message)});else this.$message.error("请检查表单内容是否填写完整")})},handlSelect(e){this.clickRow=e},resetData(){this.searchForm={account:"",role:"",pageNum:1,pageSize:10},this.getTableData()},handleRowClick(e,t){switch(e){case"add":this.dialogVisible=!0,this.operationType="add",this.addForm.id&&delete this.addForm.id;break;case"editor":this.operationType="editor",this.dialogVisible=!0,this.getAccountDetail(t.id);break;case"delete":this.getAccountDelete(t.id);break;case"enable":this.getAccountMotiy(t)}},getAccountMotiy(e){const t=[];var a="";a=0==e.state?"启用":"禁用",t.push(e.id),this.$confirm(`是否${a}该账号！`,""+a,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.loading=!0;const t={id:e.id,state:0==e.state?1:0};r["a"].getAccountMotiy(t).then(e=>{200==e.status?(this.$message.success(e.message),this.getTableData()):this.$message.error(e.message)}).finally(()=>{this.loading=!1})})},getAccountDelete(e){const t=[];t.push(e),this.$confirm("删除以后数据不可恢复，请谨慎操作！","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.loading=!0,r["a"].getAccountDelete({ids:t}).then(e=>{200==e.status?(this.$message.success(e.message),this.getTableData()):this.$message.error(e.message)}).finally(()=>{this.loading=!1})})},getAccountDetail(e){r["a"].getAccountDetail({id:e}).then(e=>{200==e.status?(this.addForm=e.data,this.addForm.password="123456",this.addForm.checkPass="123456"):this.$message.error(e.message)})},getTableData(e){this.loading=!0,e&&(this.searchForm.pageNum=1,this.searchForm.pageSize=10);const t=JSON.parse(JSON.stringify(this.searchForm));t.account||delete t.account,r["a"].getAcountList(t).then(e=>{200==e.status?(this.pageInfo.total=e.data.total,this.tableData=e.data.records,this.tableData.forEach(e=>{e.roleName=[],e.roles.length>0&&e.roles.forEach(t=>{e.roleName.push(t.name)})})):this.$message.error(e.message)}).finally(()=>{this.loading=!1})},handlePageChanged(e){this.searchForm.pageNum=e,this.getTableData(!1)},handlePageSizeChanged(e){this.searchForm.pageSize=e,this.getTableData(!1)}}},i=o,c=(a("7d64"),a("2877")),d=Object(c["a"])(i,s,l,!1,null,"015f5f34",null);t["default"]=d.exports},"7d64":function(e,t,a){"use strict";a("de7e")},b45c:function(e,t,a){e.exports=a.p+"img/empty.b4816776.png"},de7e:function(e,t,a){}}]);
//# sourceMappingURL=chunk-a27704e6.7cdf2427.js.map